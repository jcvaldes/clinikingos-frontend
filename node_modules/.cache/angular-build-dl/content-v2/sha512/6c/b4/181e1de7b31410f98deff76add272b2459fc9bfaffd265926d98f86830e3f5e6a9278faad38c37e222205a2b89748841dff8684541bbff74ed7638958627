(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{kQgB:function(e,t,a){"use strict";a.r(t),a.d(t,"UsersModule",(function(){return pe}));var o=a("3Pt+"),i=a("ofXK"),r=a("5dmV"),n=a("iHlq"),c=a("vWu4"),l=a("tyNb"),s=a("fXoL");let b=(()=>{class e{constructor(e){this.router=e}ngOnInit(){}createdUser(){this.router.navigate(["users"])}}return e.\u0275fac=function(t){return new(t||e)(s.Qb(l.c))},e.\u0275cmp=s.Kb({type:e,selectors:[["app-users"]],decls:1,vars:0,template:function(e,t){1&e&&s.Rb(0,"router-outlet")},directives:[l.h],encapsulation:2}),e})();var u=a("0IaG"),d=a("M9IT"),m=a("Dh3D"),f=a("xgIS"),p=a("VRyK"),h=a("Kj3r"),v=a("/uUt"),g=a("vkgz"),C=a("PSD3"),V=a.n(C),W=a("quSY"),w=a("/t3+"),y=a("bTqV"),D=a("NFeN"),S=a("kmnG"),q=a("qFsG"),G=a("jtHE"),E=a("XNiG"),x=a("1G5W");let R=(()=>{class e{constructor(e,t,a=!1){this.service=e,this.url=t,this.isServerSide=a,this.isRequired=!1,this.comboFilterCtrl=new o.d,this.filteredData=new G.a(1),this._onDestroy=new E.a,e.url=t,a||(this.onLoad(),this.onChange())}onLoad(e=""){return this.service.getAll(e,"id","asc",0,0).subscribe(e=>{this.payload=e.payload,this.filteredData.next(this.payload.slice())})}onChange(){this.comboFilterCtrl.valueChanges.pipe(Object(x.a)(this._onDestroy)).subscribe(()=>{this.filterData()})}filterData(){if(!this.payload)return;let e=this.comboFilterCtrl.value;e?(e=e.toLowerCase(),this.filteredData.next(this.payload.filter(t=>t.description.toLowerCase().indexOf(e)>-1))):this.filteredData.next(this.payload.slice())}ngOnDestroy(){this._onDestroy.next(),this._onDestroy.complete()}}return e.\u0275fac=function(e){s.dc()},e.\u0275dir=s.Lb({type:e,inputs:{isRequired:"isRequired",comboCtrl:"comboCtrl"}}),e})();var k=a("CFL1"),I=a("LvDl"),O=a.n(I),U=a("d3UM"),j=a("FKr1"),F=a("WJ5W");function N(e,t){if(1&e&&(s.Wb(0,"span",5),s.Gc(1),s.Vb()),2&e){const e=s.ic();s.Db(1),s.Jc(" (+",e.comboCtrl.value.length-1," ",2===(null==e.comboCtrl.value?null:e.comboCtrl.value.length)?"otro":"otros",") ")}}function P(e,t){if(1&e&&(s.Wb(0,"mat-option",6),s.Gc(1),s.Vb()),2&e){const e=t.$implicit;s.qc("value",e.id),s.Db(1),s.Hc(e.rolename)}}let _=(()=>{class e extends R{constructor(e,t){super(e,"/api/role",!1),this._httpService=e}onSelectionChange(e){const t=O.a.filter(this.payload,t=>t.id===e.value[0]);this.selected=t[0].rolename}}return e.\u0275fac=function(t){return new(t||e)(s.Qb(c.c),s.Qb(k.a))},e.\u0275cmp=s.Kb({type:e,selectors:[["app-role-search"]],features:[s.Ab],decls:10,vars:8,consts:[["placeholder","Selecciona rol","required","","multiple","",3,"formControl","selectionChange"],["singleSelect",""],["placeholderLabel","Buscar rol",3,"formControl","noEntriesFoundLabel"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"example-additional-selection"],[3,"value"]],template:function(e,t){1&e&&(s.Wb(0,"mat-form-field"),s.Wb(1,"mat-select",0,1),s.ec("selectionChange",(function(e){return t.onSelectionChange(e)})),s.Wb(3,"mat-option"),s.Rb(4,"ngx-mat-select-search",2),s.Vb(),s.Wb(5,"mat-select-trigger"),s.Gc(6),s.Ec(7,N,2,2,"span",3),s.Vb(),s.Ec(8,P,2,2,"mat-option",4),s.jc(9,"async"),s.Vb(),s.Vb()),2&e&&(s.Db(1),s.qc("formControl",t.comboCtrl),s.Db(3),s.qc("formControl",t.comboFilterCtrl)("noEntriesFoundLabel","No hay resultados"),s.Db(2),s.Ic(" ",t.comboCtrl.value?t.selected:""," "),s.Db(1),s.qc("ngIf",(null==t.comboCtrl.value?null:t.comboCtrl.value.length)>1),s.Db(1),s.qc("ngForOf",s.kc(9,6,t.filteredData)))},directives:[S.c,U.a,o.t,o.n,o.e,j.o,F.a,U.c,i.m,i.l],pipes:[i.b],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%;display:block!important}"]}),e})();var L=a("1jcm");let M=(()=>{class e{constructor(e,t,a,i){this.notificationService=e,this.dialogRef=t,this.data=a,this._userService=i,this.userSubscription=new W.a,this.form=new o.g({id:new o.d(null),fullname:new o.d("",o.u.required),lastname:new o.d("",o.u.required),email:new o.d("",[o.u.required,o.u.email]),enabled:new o.d(!0),password:new o.d(null,o.u.required),confirmPassword:new o.d(null,o.u.required),roles:new o.d([],o.u.required),active:new o.d(!0)}),a&&this.populateForm(a)}ngOnDestroy(){this.userSubscription.unsubscribe()}ngOnInit(){}onClear(){this.onClose()}onClose(e){this.dialogRef.close(e)}onSubmit(){this.form.valid&&(this.form.get("id").value?this._userService.update(this.form.value).subscribe(e=>{this.onClose(!0),this.notificationService.success(":: El usuario ha sido actualizado")},e=>{this.notificationService.error(":: "+e)}):this._userService.add(this.form.value).subscribe(e=>{this.onClose(!0),this.notificationService.success(":: El usuario ha sido creado")},e=>{this.notificationService.error(":: "+e)}))}initializeFormGroup(){this.form.setValue({id:null,description:"",active:!0})}populateForm(e){this.userSubscription=this._userService.getSingle(e.id).subscribe(e=>{this.user=e.payload})}}return e.\u0275fac=function(t){return new(t||e)(s.Qb(n.a),s.Qb(u.e),s.Qb(u.a),s.Qb(c.i))},e.\u0275cmp=s.Kb({type:e,selectors:[["app-user-detail"]],decls:52,vars:4,consts:[["color","primary"],[1,"fill-remaining-space"],["mat-stroked-button","","tabIndex","-1",1,"btn-dialog-close",3,"click"],[1,"normal-form",3,"formGroup"],[1,"row","my-6"],[1,"col-12","col-sm-12","col-md-6"],["type","hidden","formControlName","id"],["formControlName","fullname","matInput","","placeholder","Nombre/s","required","","autocomplete","off"],["formControlName","lastname","matInput","","placeholder","Apellido","required","","autocomplete","off"],["formControlName","password","matInput","","placeholder","Contrase\xf1a","type","password","required","","autocomplete","off"],["formControlName","confirmPassword","matInput","","placeholder","Confirmar contrase\xf1a","type","password","required","","autocomplete","off"],[1,"row"],["formControlName","email","matInput","","placeholder","Email","require","","autocomplete","off","d",""],[3,"comboCtrl"],["formControlName","active","ngchecked","[active]"],[1,"row","m-t-10"],[1,"col-12"],[1,"button-row","text-right"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click"],["mat-button","","color","warn",3,"click"]],template:function(e,t){1&e&&(s.Wb(0,"mat-toolbar",0),s.Wb(1,"span"),s.Gc(2),s.Vb(),s.Rb(3,"span",1),s.Wb(4,"button",2),s.ec("click",(function(){return t.onClose()})),s.Wb(5,"mat-icon"),s.Gc(6,"clear"),s.Vb(),s.Vb(),s.Vb(),s.Wb(7,"form",3),s.Wb(8,"div",4),s.Wb(9,"div",5),s.Rb(10,"input",6),s.Wb(11,"mat-form-field"),s.Rb(12,"input",7),s.Wb(13,"mat-error"),s.Gc(14,"El nombre es requerido.."),s.Vb(),s.Vb(),s.Vb(),s.Wb(15,"div",5),s.Wb(16,"mat-form-field"),s.Rb(17,"input",8),s.Wb(18,"mat-error"),s.Gc(19,"El apellido es requerido.."),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(20,"div",4),s.Wb(21,"div",5),s.Wb(22,"mat-form-field"),s.Rb(23,"input",9),s.Wb(24,"mat-error"),s.Gc(25,"La contrase\xf1a es requerida.."),s.Vb(),s.Vb(),s.Vb(),s.Wb(26,"div",5),s.Wb(27,"mat-form-field"),s.Rb(28,"input",10),s.Wb(29,"mat-error"),s.Gc(30,"Debe repetir la contrase\xf1a.."),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(31,"div",11),s.Wb(32,"div",5),s.Wb(33,"mat-form-field"),s.Rb(34,"input",12),s.Wb(35,"mat-error"),s.Gc(36,"El email es requerido.."),s.Vb(),s.Vb(),s.Vb(),s.Wb(37,"div",5),s.Rb(38,"app-role-search",13),s.Vb(),s.Vb(),s.Wb(39,"div",11),s.Wb(40,"div",5),s.Wb(41,"mat-slide-toggle",14),s.Gc(42,"Habilitado"),s.Vb(),s.Vb(),s.Vb(),s.Wb(43,"div",15),s.Wb(44,"div",16),s.Wb(45,"div",17),s.Wb(46,"button",18),s.ec("click",(function(){return t.onSubmit()})),s.Wb(47,"mat-icon"),s.Gc(48,"save"),s.Vb(),s.Gc(49," Guardar "),s.Vb(),s.Wb(50,"button",19),s.ec("click",(function(){return t.onClear()})),s.Gc(51,"Cancelar"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&e&&(s.Db(2),s.Hc(t.form.controls.id.value?"Modificar Usuario":"Nuevo Usuario"),s.Db(5),s.qc("formGroup",t.form),s.Db(31),s.qc("comboCtrl",t.form.get("roles")),s.Db(8),s.qc("disabled",t.form.invalid))},directives:[w.a,y.b,D.a,o.v,o.o,o.h,o.c,o.n,o.f,S.c,q.b,o.t,S.b,_,L.a],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}button.mat-mini-fab.mat-warn[_ngcontent-%COMP%]{position:absolute;top:5px;right:21px}"]}),e})();var Q=a("+0xr"),H=a("Xa2L");const T=["input"];function z(e,t){if(1&e){const e=s.Xb();s.Wb(0,"button",28),s.ec("click",(function(){return s.yc(e),s.ic().onSearchClear()})),s.Wb(1,"mat-icon"),s.Gc(2,"close"),s.Vb(),s.Vb()}}function A(e,t){1&e&&(s.Wb(0,"div",29),s.Rb(1,"mat-spinner"),s.Vb())}function $(e,t){1&e&&(s.Wb(0,"mat-header-cell",30),s.Gc(1,"Nombre/s"),s.Vb())}function B(e,t){if(1&e&&(s.Wb(0,"mat-cell"),s.Gc(1),s.Vb()),2&e){const e=t.$implicit;s.Db(1),s.Hc(e.fullname)}}function K(e,t){1&e&&(s.Wb(0,"mat-header-cell",30),s.Gc(1,"Apellido"),s.Vb())}function X(e,t){if(1&e&&(s.Wb(0,"mat-cell"),s.Gc(1),s.Vb()),2&e){const e=t.$implicit;s.Db(1),s.Hc(e.lastname)}}function J(e,t){1&e&&(s.Wb(0,"mat-header-cell",30),s.Gc(1,"Email"),s.Vb())}function Z(e,t){if(1&e&&(s.Wb(0,"mat-cell"),s.Gc(1),s.Vb()),2&e){const e=t.$implicit;s.Db(1),s.Hc(e.email)}}function Y(e,t){1&e&&(s.Wb(0,"mat-header-cell",30),s.Gc(1,"Fecha de alta"),s.Vb())}function ee(e,t){if(1&e&&(s.Wb(0,"mat-cell"),s.Gc(1),s.jc(2,"date"),s.Vb()),2&e){const e=t.$implicit;s.Db(1),s.Hc(s.lc(2,1,e.createdAt,"dd/MM/yyyy"))}}function te(e,t){1&e&&s.Rb(0,"mat-header-cell")}function ae(e,t){if(1&e){const e=s.Xb();s.Wb(0,"mat-cell"),s.Wb(1,"button",31),s.ec("click",(function(){s.yc(e);const a=t.$implicit;return s.ic().onEdit(a)})),s.Wb(2,"mat-icon"),s.Gc(3,"edit"),s.Vb(),s.Vb(),s.Wb(4,"button",32),s.ec("click",(function(){s.yc(e);const a=t.$implicit;return s.ic().onDelete(a.id)})),s.Wb(5,"mat-icon"),s.Gc(6,"delete_outline"),s.Vb(),s.Vb(),s.Vb()}}function oe(e,t){1&e&&(s.Wb(0,"mat-footer-cell",33),s.Gc(1," Loading data... "),s.Vb())}function ie(e,t){1&e&&(s.Wb(0,"mat-footer-cell",33),s.Gc(1," No data. "),s.Vb())}function re(e,t){1&e&&s.Rb(0,"mat-header-row")}function ne(e,t){1&e&&s.Rb(0,"mat-row")}const ce=function(){return[5,10,25,100]};let le=(()=>{class e{constructor(e,t,a,o,i){this.dialog=e,this.router=t,this.route=a,this.notificationService=o,this._userService=i,this.displayedColumns=["fullname","lastname","email","createdAt","actions"],this.route.data.subscribe(e=>{this.dataSource=e.users})}ngOnInit(){this.filter=""}onCreate(){this.dialog.open(M,this.dialogConfig()).afterClosed().subscribe(e=>{e&&this.loadUserPage("asc")})}onEdit(e){this.dialog.open(M,this.dialogConfig(e)).afterClosed().subscribe(e=>{this.loadUserPage(this.sort.direction)})}onDelete(e){V.a.fire({title:"\xbfEst\xe1 seguro?",text:"Est\xe1s a punto de desactivar un Usuario",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xed, Desactivar!",cancelButtonText:"No"}).then(t=>{t.value&&this._userService.delete(e).subscribe(e=>{this.notificationService.success("El usuario seleccionado ha sido Eliminado"),this.loadUserPage()},e=>{console.log(e),V.a.fire({title:"Reglas de Validaci\xf3n",text:e,icon:"error",showConfirmButton:!1,timer:2e3,animation:!1})})})}onSearchClear(){this.input.nativeElement.value.length>0&&(this.input.nativeElement.value="",this.loadUserPage())}ngAfterViewInit(){Object(f.a)(this.input.nativeElement,"keyup").pipe(Object(h.a)(150),Object(v.a)(),Object(g.a)(()=>{this.paginator.pageIndex=0,this.loadUserPage(),this.filter=this.input.nativeElement.value})).subscribe(),this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),Object(p.a)(this.sort.sortChange,this.paginator.page).pipe(Object(g.a)(()=>{this.loadUserPage()})).subscribe()}loadUserPage(e=this.sort.direction){this.router.navigated=!1,this.router.navigate(["/users"],{queryParams:{filter:this.input.nativeElement.value,pageIndex:this.paginator.pageIndex,pageSize:this.paginator.pageSize}}).then(()=>{})}dialogConfig(e){const t=new u.c;return t.autoFocus=!0,t.width="700px",t.data=e||null,t}}return e.\u0275fac=function(t){return new(t||e)(s.Qb(u.b),s.Qb(l.c),s.Qb(l.a),s.Qb(n.a),s.Qb(c.i))},e.\u0275cmp=s.Kb({type:e,selectors:[["app-user-list"]],viewQuery:function(e,t){var a;1&e&&(s.Cc(m.a,!0),s.Cc(d.a,!0),s.Cc(T,!0)),2&e&&(s.uc(a=s.fc())&&(t.sort=a.first),s.uc(a=s.fc())&&(t.paginator=a.first),s.uc(a=s.fc())&&(t.input=a.first))},decls:41,vars:13,consts:[[1,"row"],[1,"col-lg-9","col-md-12"],[1,"card","box","box-info"],[1,"card-body"],[1,"d-flex","justify-content-between","m-b-10"],["color","primary",1,"btn","btn-outline-info","waves-effect","waves-light","d-none","d-sm-inline-flex",3,"click"],["floatLabel","never",1,"search-form-field"],["matInput","","placeholder","Buscar...","autocomplete","off"],["input",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["class","spinner-container",4,"ngIf"],[1,"mat-elevation-z8"],["matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["matColumnDef","fullname"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","lastname"],["matColumnDef","email"],["matColumnDef","createdAt"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["matColumnDef","loading"],["colspan","6",4,"matFooterCellDef"],["matColumnDef","noData"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions"],["paginator",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"spinner-container"],["mat-sort-header",""],["mat-icon-button","",3,"click"],["mat-icon-button","","color","warn",3,"click"],["colspan","6"]],template:function(e,t){1&e&&(s.Wb(0,"div",0),s.Wb(1,"div",1),s.Wb(2,"div",2),s.Wb(3,"div",3),s.Wb(4,"div",4),s.Wb(5,"button",5),s.ec("click",(function(){return t.onCreate()})),s.Wb(6,"mat-icon"),s.Gc(7,"add"),s.Vb(),s.Gc(8," Crear "),s.Vb(),s.Wb(9,"mat-form-field",6),s.Rb(10,"input",7,8),s.Ec(12,z,3,0,"button",9),s.Vb(),s.Vb(),s.Ec(13,A,2,0,"div",10),s.jc(14,"async"),s.Wb(15,"div",11),s.Wb(16,"mat-table",12),s.Ub(17,13),s.Ec(18,$,2,0,"mat-header-cell",14),s.Ec(19,B,2,1,"mat-cell",15),s.Tb(),s.Ub(20,16),s.Ec(21,K,2,0,"mat-header-cell",14),s.Ec(22,X,2,1,"mat-cell",15),s.Tb(),s.Ub(23,17),s.Ec(24,J,2,0,"mat-header-cell",14),s.Ec(25,Z,2,1,"mat-cell",15),s.Tb(),s.Ub(26,18),s.Ec(27,Y,2,0,"mat-header-cell",14),s.Ec(28,ee,3,4,"mat-cell",15),s.Tb(),s.Ub(29,19),s.Ec(30,te,1,0,"mat-header-cell",20),s.Ec(31,ae,7,0,"mat-cell",15),s.Tb(),s.Ub(32,21),s.Ec(33,oe,2,0,"mat-footer-cell",22),s.Tb(),s.Ub(34,23),s.Ec(35,ie,2,0,"mat-footer-cell",22),s.Tb(),s.Ec(36,re,1,0,"mat-header-row",24),s.Ec(37,ne,1,0,"mat-row",25),s.Vb(),s.Rb(38,"mat-paginator",26,27),s.jc(40,"async"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&e&&(s.Db(12),s.qc("ngIf",!0),s.Db(1),s.qc("ngIf",s.kc(14,8,t.dataSource.loading$)),s.Db(3),s.qc("dataSource",t.dataSource),s.Db(20),s.qc("matHeaderRowDef",t.displayedColumns),s.Db(1),s.qc("matRowDefColumns",t.displayedColumns),s.Db(1),s.qc("length",s.kc(40,10,t.dataSource.count$))("pageSize",10)("pageSizeOptions",s.rc(12,ce)))},directives:[D.a,S.c,q.b,i.m,Q.l,m.a,Q.c,Q.g,Q.b,Q.e,Q.i,Q.k,d.a,y.b,S.f,H.b,Q.f,m.b,Q.a,Q.d,Q.h,Q.j],pipes:[i.b,i.e],styles:[".card-body[_ngcontent-%COMP%]{padding:10px}"]}),e})();var se=a("SCq0");const be=[{path:"",component:b,canActivateChild:[c.j],data:{titulo:"Gesti\xf3n de Usuarios"},children:[{path:"",component:le,runGuardsAndResolvers:"always",resolve:{users:(()=>{class e{constructor(e,t){this._userService=e,this.router=t}resolve(e,t){this.dataSource=new se.a(this._userService);const a=e.queryParamMap.get("filter")||"",o=+e.queryParamMap.get("pageIndex")||0,i=+e.queryParamMap.get("pageSize")||10;return this.dataSource.load(a,"id","asc",o,i).then(e=>this.dataSource)}}return e.\u0275fac=function(t){return new(t||e)(s.ac(k.a),s.ac(l.c))},e.\u0275prov=s.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}},{path:"new",component:M},{path:":id",component:M}]}];let ue=(()=>{class e{}return e.\u0275mod=s.Ob({type:e}),e.\u0275inj=s.Nb({factory:function(t){return new(t||e)},imports:[[l.g.forChild(be)],l.g]}),e})();var de=a("iTUp"),me=a("j1ZV"),fe=a("0upZ");let pe=(()=>{class e{}return e.\u0275mod=s.Ob({type:e}),e.\u0275inj=s.Nb({factory:function(t){return new(t||e)},providers:[c.c,n.a],imports:[[i.c,r.a,o.i,o.s,de.a,ue,fe.RolesModule,me.a]]}),e})()}}]);